import{u as w,r as c,j as a}from"./index-DTeQFD_G.js";import{E as A,l as g,s as x,T as U,R as B,p as E,U as k,C as H,a as z,c as K,r as Y}from"./rosterParser-7Qy6MDym.js";import{N as b}from"./Navbar-j2UQemF4.js";import{l as G}from"./logo-t7jx956G.js";/* empty css            */import{c as I,C as M,B as _,T as V}from"./TextField-B22A1mYO.js";const W=(h,l)=>{const s=h.reduce((n,r)=>n+r,0)+(l?10:0);return Math.min(s,100)},q=({units:h,commandPoints:l,roundPoints:m,paintedBonus:s,gameDate:n,customFileName:r})=>{const e=new A,d=e.internal.pageSize.height,o=14;let t=30;const f=n?new Date(n).toLocaleDateString("en-UK"):new Date().toLocaleDateString("en-UK"),p=r||`Game on ${f}`;e.setFontSize(16),e.text(p,o,22),e.setFontSize(12),h.forEach(i=>{t+60>d&&(e.addPage(),t=30),e.text(`Unit: ${i.name}`,o,t),t+=6,e.text(`Kills: ${i.kills}`,o,t),t+=6,e.text(`Destroyed: ${i.destroyed?"Yes":"No"}`,o,t),t+=6,e.text(`Category: ${i.category}`,o,t),t+=6,e.text(`Agenda: ${i.agenda||""}`,o,t),t+=6,e.text(`Agenda Completed: ${i.agendaCompleted?"Yes":"No"}`,o,t),t+=6,e.text("----------------------------------------------------",o,t),t+=10}),t+40>d&&(e.addPage(),t=30),e.text(`Command Points Unused: ${l}`,o,t),t+=6,e.text(`Score per Round: ${m.join(", ")}`,o,t),t+=6,e.text(`Total Score: ${W(m,s)}`,o,t),t+=6,e.text(`Painted Bonus: ${s?"Yes":"No"}`,o,t);const S=n?new Date(n).toLocaleDateString("en-CA"):new Date().toLocaleDateString("en-CA"),u=r||`unit_data_${S}.pdf`;e.save(u)},J=I({palette:{mode:"dark"}}),ot=()=>{const h=w(),[l,m]=c.useState(g("units")||[]),[s,n]=c.useState(g("commandPoints")||0),[r,e]=c.useState(g("rosterText")||""),[d,o]=c.useState(g("roundPoints")||Array(5).fill(0)),[t,f]=c.useState(g("paintedBonus")||!1),[p,S]=c.useState(g("gameDate")||""),[u,i]=c.useState(g("customFileName")||""),[T,j]=c.useState(!0);c.useEffect(()=>{x("units",l),x("commandPoints",s),x("rosterText",r),x("roundPoints",d),x("paintedBonus",t),x("gameDate",p),x("customFileName",u)},[l,s,r,d,t,p,u]);const y=(D,v,L)=>{m(F=>F.map(P=>P.id===D?{...P,[v]:L}:P))},C=()=>{q({units:l,commandPoints:s,roundPoints:d,paintedBonus:t,gameDate:p,customFileName:u})},N=()=>{h("/",{state:{playerMode:"1"}})},R=()=>{j(D=>!D)},$=()=>{Y({setUnits:m,setCommandPoints:n,setRosterText:e,setRoundPoints:o,setPaintedBonus:f,setGameDate:S,setCustomFileName:i})};return a.jsx(U,{theme:J,children:a.jsxs(M,{maxWidth:"lg",sx:{paddingTop:{xs:"56px",sm:"64px"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",minHeight:"100vh",padding:2,textAlign:"center",color:"white"},children:[a.jsx(b,{onExportPDF:C,onNavigateHome:N,onToggleLogo:R,logoVisible:T,currentPage:"App"}),a.jsx(_,{display:"flex",justifyContent:"center",marginBottom:2,children:T&&a.jsx("img",{src:G,alt:"Logo",style:{height:"150px",marginRight:"0px"}})}),a.jsx(B,{rosterText:r,setRosterText:e,gameDate:p,setGameDate:S,customFileName:u,setCustomFileName:i,parseRoster:()=>m(E(r)),resetData:$}),a.jsx(k,{units:l,updateUnit:y}),a.jsx(H,{commandPoints:s,setCommandPoints:n}),a.jsx(z,{roundPoints:d,setRoundPoints:o,paintedBonus:t,setPaintedBonus:f}),a.jsxs(V,{variant:"h6",align:"center",className:"total-score",sx:{marginTop:2},children:["Total Score: ",K(d,t)]})]})})};export{ot as default};
